
import React, { useState } from 'react';
import {
  SafeAreaView,
  StatusBar,
  useColorScheme,
  StyleSheet,
  Alert,
  Text,
  View,
  Button,
  TextInput,
  ScrollView
} from 'react-native';
 import AppStyles from '../../styles/AppStyles.tsx';
import ExchangeRate from './ExchangeRate.tsx';
import PlusButton from './PlusButton.tsx';
import {useEffect} from 'react';

const RateContainer = () => {

  const addExchangeRate = async (imageName:string,currency:string,buyValue:number,sellValue:number   ) => {
  // Alert.alert("AAAAAA")
       const newItem = {
       imageName: imageName,
      currency: currency,
      buyValue: buyValue,
      sellValue: sellValue,
    };

     setExchangeRates(exchangeRates => [...exchangeRates, newItem]);
    //  navigation.navigate('Exchange_office');
 }
  


  const [exchangeRates, setExchangeRates] = useState<Array<{ imageName: string; currency: string,buyValue:number, sellValue:number  }>>([]);

  useEffect(() => {
    // Update the document title using the browser API
       const newItem = {
      imageName: "australian-flag.png",
      currency: "AUD",
      buyValue: 10,
      sellValue: 15,
    };

 setExchangeRates(exchangeRates => [...exchangeRates, newItem]);
 //setExchangeRates(exchangeRates => [...exchangeRates, newItem]);

  },[]);

  return (
  <View style= {AppStyles.exchange_rate_div }>

   <ScrollView>


       {exchangeRates.map((rate) => 
         <ExchangeRate
         setExchangeRate={setExchangeRates}
         exchangeRates={exchangeRates}
         imageName= {rate.imageName}
         currency=  {rate.currency}
         buyValue= {rate.buyValue}
         sellValue= {rate.sellValue}
       />
)}

</ScrollView>

  <PlusButton
  onPressFunction={()=>{addExchangeRate("australian-flag.png", "AUD", 2, 22 )}}
  />
 </View>
  )
}

export default RateContainer